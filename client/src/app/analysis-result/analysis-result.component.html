<div class="container">
  <div class="row">
    <div class="col mt-5">
      <div class="card">
        <div class="card-body">
          <h1>Analysis Result</h1>
          <div class="row mb-3 mt-2">
            <div class="col d-flex align-items-center">
              <!-- <div>
                <div class="text-bold">URL :</div> {{ url }}
              </div> -->
            </div>
            <div class="col d-flex align-items-center">
              <!-- <div>
                <div class="text-bold">Screen Size :</div> {{ size }}
              </div> -->
            </div>
            <div class="col d-flex justify-content-end">
              <!-- <a class="btn btn-primary" href="{{resultHtmlURL}}" target="_blank" *ngIf="showResult">
                Open HTML result
              </a> -->
            </div>
          </div>
          <hr>
          <div *ngIf="!showResult && !showError">
            <div class="alert alert-dark">
              <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
              </div>
              <div class="mt-2 mb-2 text-center">Please wait...</div>
            </div>
          </div>
          <!-- Result -->
          <div *ngIf="showResult">
            <div class="row">
              <div class="col-3">
                <div class="list-group">
                  <button type="button" class="list-group-item list-group-item-action" [ngClass]="{'active': currentPage === 'Home'}" (click)="currentPage = 'Home'">
                    Home
                  </button>

                  <button type="button" class="list-group-item list-group-item-action list-header" disabled>
                    Typography
                  </button>
                  <button type="button" class="list-group-item list-group-item-action" [ngClass]="{'active': currentPage === 'Text Size'}" (click)="currentPage = 'Text Size'">
                    Text Size
                  </button>

                  <button type="button" class="list-group-item list-group-item-action list-header" disabled>
                    Color Usage
                  </button>
                  <button type="button" class="list-group-item list-group-item-action" [ngClass]="{'active': currentPage === 'Color Harmony'}" (click)="currentPage = 'Color Harmony'">
                    Color Harmony
                  </button>

                  <button type="button" class="list-group-item list-group-item-action list-header" disabled>
                    Debug
                  </button>
                  <button type="button" class="list-group-item list-group-item-action" [ngClass]="{'active': currentPage === 'Raw JSON'}" (click)="currentPage = 'Raw JSON'">
                    Raw JSON
                  </button>
                </div>
              </div>
              <div class="col-9">

                <div *ngIf="currentPage == 'Home'">
                  <div class="h3">URL</div>
                    <a [href]="analysisResult.browserInfoResult.url">{{ analysisResult.browserInfoResult.url }}</a>
                  <hr>
                  <div class="h3">Viewport Snapshot</div>
                  <table class="table table-bordered">
                    <tr>
                      <td></td>
                      <td style="text-align: center;"><b>Viewport Width:</b> {{analysisResult.browserInfoResult.viewportWidth}}px</td>
                    </tr>
                    <tr>
                      <td style="vertical-align: middle;">
                        <span style="writing-mode: vertical-rl;">
                          <b>Viewport Height:</b> {{analysisResult.browserInfoResult.viewportHeight}}px
                        </span>
                      </td>
                      <td><img [src]="analysisResult.screenshot" alt="" width="100%"></td>
                    </tr>
                  </table>
                </div>

                <div *ngIf="currentPage == 'Text Size'">
                  <h3>Text Size Distribution</h3>
                  <ngx-charts-bar-vertical
                    style="display: block;"
                    [showDataLabel]="true"
                    [results]="fiTextSizeBarData"
                    [xAxis]="true"
                    [yAxis]="true"
                    [showXAxisLabel]="true"
                    [showYAxisLabel]="true"
                    [view]="[600, 300]"
                    >
                  </ngx-charts-bar-vertical>
                  <div class="clearfix"></div>
                  <hr>

                  <h3>Config</h3>
                  <p><b>Minimum Text Size:</b> {{ this.analysisResult.analysisConfig.textSize.minimumSize }} px</p>
                  <mat-slider style="width: 500px" min="0" max="30" step="1" thumbLabel
                  [value]="this.analysisResult.analysisConfig.textSize.minimumSize"
                  (change)="fiTextSizeMinimumSizeChange($event)"></mat-slider>
                  <hr>

                  <h3>Score</h3>
                  <ngx-charts-gauge
                    [view]="[500, 400]"
                    [scheme]="{
                      domain: ['#5AA454']
                    }"
                    [min]="0"
                    [max]="100"
                    [results]="[{name: 'Score', value: fiTextSizeScore}]">
                  </ngx-charts-gauge>
                  <div class="clearfix"></div>
                </div>

                <div *ngIf="currentPage == 'Color Harmony'">
                  <h3>Screenshot</h3>
                  <img [src]="analysisResult.screenshot" alt="" width="100%">
                  <hr>
                  <h3>Dominant Colors</h3>
                  <div class="d-flex justify-content-center">
                    <div class="ml-3 mr-3 d-flex flex-column align-items-center" *ngFor="let vibrantItem of this.fiColorHarmonyVibrantItems">
                      <div class="text-bold">{{vibrantItem.name}}</div>
                      <div style="width: 50px; height: 50px;" [ngStyle]="{'background-color': 'rgb(' + vibrantItem.r + ', ' + vibrantItem.g + ', ' + vibrantItem.b + ')'}">
                      </div>
                      <div><b>RGB: </b>{{vibrantItem.r}}, {{vibrantItem.g}}, {{vibrantItem.b}}</div>
                    </div>
                  </div>
                </div>

                <div *ngIf="currentPage == 'Raw JSON'">
                  <pre>
{{ analysisResultRaw }}
                  </pre>
                </div>
              </div>
            </div>
          </div>
          <!-- Error -->
          <!-- <div *ngIf="showError">
            <div class="alert alert-danger">Cannot access the requested URL</div>
          </div> -->
        </div>
      </div>
    </div>
  </div>
</div>
